<div class="mattreediv" style="float: left">
  <mat-tree [dataSource]="dataSource" [treeControl]="treeControl">
    <!-- This is the tree node template for leaf nodes -->
    <mat-tree-node *matTreeNodeDef="let node;" matTreeNodePadding>
      <!-- use a disabled button to provide padding for tree leaf -->
      <button (click)="getTradesByProfession(node.name)" mat-icon-button>Pregled </button>
      {{node.name}}
    </mat-tree-node>
    <!-- This is the tree node template for expandable nodes -->
    <mat-tree-node *matTreeNodeDef="let node;when: hasChild" matTreeNodePadding>
      <button mat-icon-button matTreeNodeToggle
              [attr.aria-label]="'Toggle ' + node.name">
        <mat-icon class="mat-icon-rtl-mirror">
          {{treeControl.isExpanded(node) ? 'expand_more' : 'chevron_right'}}
        </mat-icon>
      </button>
      {{node.name}}
    </mat-tree-node>
  </mat-tree>
</div>
<div style="margin-left: 10%">
  <h1 style="margin-left: 40%; margin-top: 2%;">Prikaz majstora: {{handymanProfession}}</h1>
  <div style="width: 90%; padding-left: 10%; margin-top: 5%">
    <form [formGroup]="form">
      <mat-form-field appearance="outline" style="width: 15%">
        <mat-label> Ime</mat-label>
        <input (input)="onInputChange($event.target.valueOf())" matInput placeholder="Ime" [formControl]="form.controls.firstName">
      </mat-form-field>
      <mat-form-field appearance="outline" style="width: 15%; margin-left: 1%">
        <mat-label> Prezime</mat-label>
        <input (input)="onInputChange($event.target.valueOf())" matInput placeholder="Prezime" [formControl]="form.controls.lastName">
      </mat-form-field>
      <mat-form-field appearance="outline" style="width: 15%; margin-left: 1%">
        <mat-label> Adresa</mat-label>
        <input (input)="onInputChange($event.target.valueOf())" matInput placeholder="Adresa" [formControl]="form.controls.address">
      </mat-form-field>
      <mat-form-field appearance="outline" style="width: 15%;margin-left: 1%">
        <mat-label>Usluge</mat-label>
        <mat-select multiple [formControl]="form.controls.selectedTrades" (selectionChange)="selectionChange($event)">
          <mat-option *ngFor="let trade of trades" [value]="trade.name">{{trade.name}}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field appearance="outline" style="width:15%;margin-left: 1%">
        <mat-label>Prosecna ocena od:</mat-label>
        <input (input)="onInputChange($event.target.valueOf())" min="0" max="5" type="number" matInput placeholder="From" [formControl]="form.controls.avgRatingFrom">
      </mat-form-field>
      <mat-form-field appearance="outline" style="width:15%;margin-left: 1%">
        <mat-label>Prosecna ocena do:</mat-label>
        <input (input)="onInputChange($event.target.valueOf())" min="0" max="5" type="number" matInput placeholder="To" [formControl]="form.controls.avgRatingTo">
      </mat-form-field>
    </form>
  </div>

  <div style="padding-top: 5%; width: 80%; padding-left: 10%">
    <app-table [columnsToDisplay]="['Ime', 'Prezime', 'Email', 'Adresa', 'Handyman details']"
               [columnsToIterate]="['firstName', 'lastName', 'email', 'address']"
               [dataSource]="handymen" (HandymanDetails)="clickedRow($event)"></app-table>
  </div>
</div>

<ngx-spinner
  bdColor="rgba(51,51,51,0.8)"
  size="medium"
  color="#fff"
  type="ball-atom">
</ngx-spinner>
